(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ConfirmOrder'"],{1148:function(t,e,c){"use strict";var a=c("a691"),r=c("1d80");t.exports=function(t){var e=String(r(this)),c="",n=a(t);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(c+=e);return c}},2273:function(t,e,c){"use strict";c("8318")},"230c":function(t,e,c){"use strict";c("677a")},"246d":function(t,e,c){},"28fd":function(t,e,c){"use strict";c("4aec")},"3f40":function(t,e,c){"use strict";c("246d")},"408a":function(t,e,c){var a=c("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=a(t))throw TypeError("Incorrect invocation");return+t}},"4aec":function(t,e,c){},"677a":function(t,e,c){},8318:function(t,e,c){},9983:function(t,e,c){"use strict";c.d(e,"a",(function(){return n}));c("b680");var a=c("5502"),r=c("7a23"),n=function(t){var e=Object(a["b"])(),c=Object(r["B"])(e.state),n=c.cartList,i=function(t,c,a,r){e.commit("addItemToCart",{shopId:t,productId:c,productInfo:a,shopName:r})},s=function(t,c){e.commit("deleteItemToCart",{shopId:t,productId:c})},o=Object(r["c"])((function(){var e,c=(null===(e=n.value[t])||void 0===e?void 0:e.productList)||{},a={};for(var r in c){var i=c[r];i.count>0&&(a[r]=i)}return a})),d=Object(r["c"])((function(){var e,c=(null===(e=n.value[t])||void 0===e?void 0:e.shopName)||"";return c})),u=Object(r["c"])((function(){var e,c=null===(e=n.value[t])||void 0===e?void 0:e.productList,a=0;if(c)for(var r in c)a+=c[r].count*c[r].price;return a.toFixed(2)}));return{allPrice:u,shopName:d,productList:o,cartList:n,addItemToCart:i,deleteItemToCart:s}}},a616:function(t,e,c){"use strict";c.r(e);var a=c("7a23"),r=Object(a["H"])("data-v-8b50fda8");Object(a["u"])("data-v-8b50fda8");var n={class:"wrapper"};Object(a["s"])();var i=r((function(t,e,c,r,i,s){var o=Object(a["y"])("Top"),d=Object(a["y"])("Products"),u=Object(a["y"])("Order");return Object(a["r"])(),Object(a["e"])(a["a"],null,[Object(a["i"])("div",n,[Object(a["i"])(o),Object(a["i"])(d)]),Object(a["i"])(u)],64)})),s=Object(a["H"])("data-v-5fbac803");Object(a["u"])("data-v-5fbac803");var o={class:"top"},d={class:"top__header"},u=Object(a["h"])(" 确认订单 "),b=Object(a["g"])('<div class="top__receiver" data-v-5fbac803><div class="top__receiver__title" data-v-5fbac803>收货地址</div><div class="top__receiver__address" data-v-5fbac803>浙江工业大学西和6号楼</div><div class="top__receiver__info" data-v-5fbac803><span class="top__receiver__info__name" data-v-5fbac803>全（女士）</span><span class="top__receiver__info__name" data-v-5fbac803>1234567890</span></div><div class="iconfont top__receiver__icon" data-v-5fbac803></div></div>',1);Object(a["s"])();var l=s((function(t,e,c,r,n,i){return Object(a["r"])(),Object(a["e"])("div",o,[Object(a["i"])("div",d,[Object(a["i"])("div",{class:"iconfont top__header__back",onClick:e[1]||(e[1]=function(){return r.handleBack&&r.handleBack.apply(r,arguments)})},""),u]),b])})),v=c("6c02"),_=function(t){var e=Object(v["d"])(),c=function(){e.push({path:"/shop/".concat(t)})};return{handleBack:c}},p={name:"Top",setup:function(){var t=Object(v["c"])(),e=t.params.id,c=_(e),a=c.handleBack;return{handleBack:a}}};c("3f40");p.render=l,p.__scopeId="data-v-5fbac803";var f=p,O=(c("b0c0"),c("b680"),Object(a["H"])("data-v-4de5bc88"));Object(a["u"])("data-v-4de5bc88");var j={class:"products"},h={class:"products__title"},m={class:"products__list"},k={key:0,class:"products__item"},w={class:"products__item__detail"},g={class:"products__item__title"},I={class:"products__item__price"},x=Object(a["i"])("span",{class:"products__item__yen"},"¥ ",-1),y={class:"products__item__total"},N=Object(a["i"])("span",{class:"products__item__yen"},"¥ ",-1);Object(a["s"])();var C=O((function(t,e,c,r,n,i){return Object(a["r"])(),Object(a["e"])("div",j,[Object(a["i"])("div",h,Object(a["A"])(r.shopName),1),Object(a["i"])("div",m,[(Object(a["r"])(!0),Object(a["e"])(a["a"],null,Object(a["x"])(r.productList,(function(t){return Object(a["r"])(),Object(a["e"])(a["a"],{key:t._id},[t.count>0?(Object(a["r"])(),Object(a["e"])("div",k,[Object(a["i"])("img",{class:"products__item__img",src:t.imgUrl},null,8,["src"]),Object(a["i"])("div",w,[Object(a["i"])("h4",g,Object(a["A"])(t.name),1),Object(a["i"])("p",I,[Object(a["i"])("span",null,[x,Object(a["h"])(" "+Object(a["A"])(t.price)+" x "+Object(a["A"])(t.count),1)]),Object(a["i"])("span",y,[N,Object(a["h"])(" "+Object(a["A"])((t.price*t.count).toFixed(2)),1)])])])])):Object(a["f"])("",!0)],64)})),128))])])})),T=c("9983"),L={name:"Products",setup:function(){var t=Object(v["c"])(),e=t.params.id,c=Object(T["a"])(e),a=c.shopName,r=c.productList;return{productList:r,shopName:a}}};c("28fd");L.render=C,L.__scopeId="data-v-4de5bc88";var F=L,P=Object(a["H"])("data-v-73e0fbaf");Object(a["u"])("data-v-73e0fbaf");var A={class:"order"},B={class:"order__price"},M=Object(a["h"])("实付金额"),H={class:"order__price__num"},R={key:0,class:"mask"},E={class:"mask__content"},S=Object(a["i"])("div",{class:"mask__content__title"},"确认要离开收银台？",-1),J=Object(a["i"])("div",{class:"mask__content__desc"},"请尽快完成支付，否则将被取消",-1),U={class:"mask__content__btn"};Object(a["s"])();var W=P((function(t,e,c,r,n,i){var s=Object(a["y"])("Toast");return Object(a["r"])(),Object(a["e"])(a["a"],null,[Object(a["i"])("div",A,[Object(a["i"])("div",B,[M,Object(a["i"])("span",H,"¥"+Object(a["A"])(r.allPrice),1)]),Object(a["i"])("div",{class:"order__btn",onClick:e[1]||(e[1]=function(){return r.handleMaskshow&&r.handleMaskshow.apply(r,arguments)})},"提交订单")]),r.maskshow?(Object(a["r"])(),Object(a["e"])("div",R,[Object(a["i"])("div",E,[S,J,Object(a["i"])("div",U,[Object(a["i"])("div",{class:"mask__btn__cancel",onClick:e[2]||(e[2]=function(){r.handlebtn(!0)})},"取消订单"),Object(a["i"])("div",{class:"mask__btn__confirm",onClick:e[3]||(e[3]=function(){r.handlebtn(!1)})},"确认支付")])])])):Object(a["f"])("",!0),r.toastshow?(Object(a["r"])(),Object(a["e"])(s,{key:1,message:r.toastmessage,class:"toast"},null,8,["message"])):Object(a["f"])("",!0)],64)})),q=c("1da1"),z=(c("96cf"),c("5502")),D=c("b775"),G=c("0eb4"),K=function(t,e,c,r){var n=Object(a["w"])(!1),i=Object(v["d"])(),s=Object(z["b"])(),o=function(){var a=Object(q["a"])(regeneratorRuntime.mark((function a(n){var o,d,u,b,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:for(d in o=[],c)u=c[d],o.push({id:u._id,num:u.count});return a.prev=2,a.next=5,Object(D["b"])("/api/order",{addressId:1,shopId:t,shopName:e.value,isCanceled:n,products:o});case 5:l=a.sent,0===(null===l||void 0===l||null===(b=l.data)||void 0===b?void 0:b.errno)?(s.commit("cleanAllProducts",{shopId:t}),i.push({name:"OrderList"})):r("提交失败"),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](2),r("请求失败");case 12:case"end":return a.stop()}}),a,null,[[2,9]])})));return function(t){return a.apply(this,arguments)}}(),d=function(){n.value=!0};return{handlebtn:o,handleMaskshow:d,maskshow:n}},Q={components:{Toast:G["a"]},setup:function(){var t=Object(v["c"])(),e=t.params.id,c=Object(T["a"])(e),a=c.allPrice,r=c.shopName,n=c.productList,i=Object(G["b"])(),s=i.toastshow,o=i.toastmessage,d=i.showToast,u=K(e,r,n,d),b=u.handlebtn,l=u.handleMaskshow,_=u.maskshow;return{allPrice:a,toastshow:s,toastmessage:o,handlebtn:b,maskshow:_,handleMaskshow:l}}};c("230c");Q.render=W,Q.__scopeId="data-v-73e0fbaf";var V=Q,X={name:"OrderConfirmation",components:{Top:f,Products:F,Order:V}};c("2273");X.render=i,X.__scopeId="data-v-8b50fda8";e["default"]=X},b680:function(t,e,c){"use strict";var a=c("23e7"),r=c("a691"),n=c("408a"),i=c("1148"),s=c("d039"),o=1..toFixed,d=Math.floor,u=function(t,e,c){return 0===e?c:e%2===1?u(t,e-1,c*t):u(t*t,e/2,c)},b=function(t){var e=0,c=t;while(c>=4096)e+=12,c/=4096;while(c>=2)e+=1,c/=2;return e},l=function(t,e,c){var a=-1,r=c;while(++a<6)r+=e*t[a],t[a]=r%1e7,r=d(r/1e7)},v=function(t,e){var c=6,a=0;while(--c>=0)a+=t[c],t[c]=d(a/e),a=a%e*1e7},_=function(t){var e=6,c="";while(--e>=0)if(""!==c||0===e||0!==t[e]){var a=String(t[e]);c=""===c?a:c+i.call("0",7-a.length)+a}return c},p=o&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){o.call({})}));a({target:"Number",proto:!0,forced:p},{toFixed:function(t){var e,c,a,s,o=n(this),d=r(t),p=[0,0,0,0,0,0],f="",O="0";if(d<0||d>20)throw RangeError("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(f="-",o=-o),o>1e-21)if(e=b(o*u(2,69,1))-69,c=e<0?o*u(2,-e,1):o/u(2,e,1),c*=4503599627370496,e=52-e,e>0){l(p,0,c),a=d;while(a>=7)l(p,1e7,0),a-=7;l(p,u(10,a,1),0),a=e-1;while(a>=23)v(p,1<<23),a-=23;v(p,1<<a),l(p,1,1),v(p,2),O=_(p)}else l(p,0,c),l(p,1<<-e,0),O=_(p)+i.call("0",d);return d>0?(s=O.length,O=f+(s<=d?"0."+i.call("0",d-s)+O:O.slice(0,s-d)+"."+O.slice(s-d))):O=f+O,O}})}}]);
//# sourceMappingURL=ConfirmOrder'.05ba09b0.js.map
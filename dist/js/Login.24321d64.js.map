{"version":3,"sources":["webpack:///./src/views/login/Login.vue?fbbc","webpack:///./src/views/login/Login.vue","webpack:///./src/views/login/Login.vue?4c80"],"names":["class","src","type","placeholder","username","password","handleLogin","handleToRegister","toastshow","message","toastmessage","showToast","router","data","result","errno","localStorage","isLogin","push","name","components","Toast","setup","render","__scopeId"],"mappings":"yGAAA,W,6JCEOA,MAAM,W,EACT,eAA4E,OAAvEA,MAAM,eAAeC,IAAI,8C,YACzBD,MAAM,kB,GAGNA,MAAM,kB,sGALb,eAYM,MAZN,EAYM,CAXJ,EACA,eAEM,MAFN,EAEM,C,eADJ,eAA4F,SAArFE,KAAK,OAAOF,MAAM,0BAA0BG,YAAY,S,qDAAkB,EAAAC,SAAQ,K,mBAAR,EAAAA,cAEnF,eAEM,MAFN,EAEM,C,eADJ,eAA+F,SAAxFF,KAAK,WAAWF,MAAM,0BAA0BG,YAAY,Q,qDAAiB,EAAAE,SAAQ,K,mBAAR,EAAAA,cAEtF,eAAgE,OAA3DL,MAAM,wBAAyB,QAAK,8BAAE,EAAAM,aAAA,EAAAA,YAAA,sBAAa,MACxD,eAAqE,OAAhEN,MAAM,sBAAuB,QAAK,8BAAE,EAAAO,kBAAA,EAAAA,iBAAA,sBAAkB,QAE9C,EAAAC,W,iBAAb,eAAiD,G,MAAxBC,QAAS,EAAAC,c,4GAchC,EAAiB,SAACC,GACtB,IAAMC,EAAS,iBACTC,EAAO,eAAS,CACpBT,SAAU,GACVC,SAAU,KAQNC,EAAU,yDAAI,gHAGM,KAAlBO,EAAKT,UAAqC,KAAlBS,EAAKR,SAHjB,uBAIdM,EAAU,cAJI,0CAOK,eAAK,kBAAmB,CAC3CP,SAAUS,EAAKT,SACfC,SAAUQ,EAAKR,WATD,OAOVS,EAPU,OAYU,IAAtBA,EAAOD,KAAKE,OACdC,aAAaC,SAAU,EACvBL,EAAOM,KAAK,CAAEC,KAAM,UAGpBR,EAAU,mBAjBI,qDAqBhBA,EAAU,QArBM,0DAAJ,qDAZoB,EAoCL,eAAOE,GAA9BT,EApC4B,EAoC5BA,SAAUC,EApCkB,EAoClBA,SAClB,MAAO,CAAED,WAAUC,WAAUC,gBAEhB,GACba,KAAM,QAENC,WAAY,CAAEC,QAAA,MACdC,MAJa,WAIJ,MAMwC,iBAAvCd,EAND,EAMCA,UAAWE,EANZ,EAMYA,aAAcC,EAN1B,EAM0BA,UAN1B,EAOqC,EAAeA,GAAnDP,EAPD,EAOCA,SAAUC,EAPX,EAOWA,SAAUC,EAPrB,EAOqBA,YAEtBM,EAAS,iBACTL,EAAmB,WACvBK,EAAOM,KAAK,CAAEC,KAAM,cAKtB,MAAO,CAAEb,cAAaC,mBAAkBC,YAAWE,eAAcN,WAAUC,c,UCjF/E,EAAOkB,OAASA,EAChB,EAAOC,UAAY,kBAEJ","file":"js/Login.24321d64.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Login.vue?vue&type=style&index=0&id=79b62086&lang=scss&scoped=true\"","<template>\r\n<!-- Login登录页面 -->\r\n  <div class=\"wrapper\">\r\n    <img class=\"wrapper__img\" src=\"http://www.dell-lee.com/imgs/vue3/user.png\"/>\r\n    <div class=\"wrapper__input\">\r\n      <input type=\"text\" class=\"wrapper__input__content\" placeholder=\"请输入手机号\" v-model=\"username\"/>\r\n    </div>\r\n    <div class=\"wrapper__input\">\r\n      <input type=\"password\" class=\"wrapper__input__content\" placeholder=\"请输入密码\" v-model=\"password\"/>\r\n    </div>\r\n    <div class=\"wrapper__login-button\" @click=\"handleLogin\">登录</div>\r\n    <div class=\"wrapper__login-link\" @click=\"handleToRegister\">立即注册</div>\r\n    <!-- 消息提醒框组件 -->\r\n    <Toast v-if=\"toastshow\" :message=\"toastmessage\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useRouter } from 'vue-router'\r\nimport { reactive, toRefs } from 'vue'\r\nimport { post } from '../../utils/request'\r\nimport Toast, { useToastEffect } from '../../components/Toast'\r\n/*\r\n登录逻辑函数\r\n输入：提示框处理函数showToast\r\n输出：动态绑定数据-用户名username, 动态绑定数据-密码password, 登录按钮句柄handleLogin\r\n*/\r\nconst useLoginEffect = (showToast) => {\r\n  const router = useRouter()\r\n  const data = reactive({\r\n    username: '',\r\n    password: ''\r\n  })\r\n  /*\r\n  登录按钮句柄handleLogin\r\n  当用户名username和密码password不为空时，\r\n  将{username: ,password: }传递给接口，\r\n  验证成功，则设置localStorage.isLogin为true，并跳转路由到Home页面\r\n  */\r\n  const handleLogin = async () => {\r\n    try {\r\n      // 输入为空\r\n      if (data.username === '' || data.password === '') {\r\n        showToast('手机号和密码不能为空')\r\n        return\r\n      }\r\n      const result = await post('/api/user/login', {\r\n        username: data.username,\r\n        password: data.password\r\n      })\r\n      // 校验成功\r\n      if (result.data.errno === 0) {\r\n        localStorage.isLogin = true\r\n        router.push({ name: 'Home' })\r\n      // 校验失败\r\n      } else {\r\n        showToast('账号密码不匹配，或此账号不存在')\r\n      }\r\n    } catch (e) {\r\n      // 链接失败\r\n      showToast('请求失败')\r\n    }\r\n  }\r\n  const { username, password } = toRefs(data)\r\n  return { username, password, handleLogin }\r\n}\r\nexport default {\r\n  name: 'Login',\r\n  // Toast组件为消息提醒框\r\n  components: { Toast },\r\n  setup () {\r\n    /*\r\n    toastshow决定Toast是否展示，需要绑定在Toast标签上（v-if=\"toastshow\"）,\r\n    toastmessage是Toast展示的内容,通过showToast(toastmessage)函数传递，并绑定在Toast标签上（:message=\"toastmessage）\r\n    showToast为Toast组件使用的函数，传入Toastmessage\r\n    */\r\n    const { toastshow, toastmessage, showToast } = useToastEffect()\r\n    const { username, password, handleLogin } = useLoginEffect(showToast)\r\n    // 跳转到注册页面的句柄函数handleToRegister\r\n    const router = useRouter()\r\n    const handleToRegister = () => {\r\n      router.push({ name: 'Register' })\r\n    }\r\n    // handleLogin登录按钮句柄, handleToRegister跳转到注册页面的句柄函数,\r\n    // toastshow决定Toast是否展示, toastmessageToast展示的内容,\r\n    // username用户名, password密码\r\n    return { handleLogin, handleToRegister, toastshow, toastmessage, username, password }\r\n  }\r\n}\r\n</script>\r\n<style lang='scss' scoped>\r\n@import '../../style/viriables.scss';\r\n.wrapper{\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 0;\r\n  right: 0;\r\n  transform: translateY(-50%);\r\n  &__img{\r\n    display: block;\r\n    margin: 0 auto .4rem auto;\r\n    width: .66rem;\r\n    height: .66rem;\r\n  }\r\n  .wrapper__input{\r\n    background: #F9F9F9;\r\n    box-sizing: border-box;\r\n    padding:0 .16rem 0 .16rem ;\r\n    border: .01rem solid rgba(0,0,0,0.10);\r\n    border-radius: .06rem;\r\n    border-radius: .06rem;\r\n    height: .48rem;\r\n    margin: 0 .4rem .16rem .4rem;\r\n    .wrapper__input__content{\r\n      border: none;\r\n      outline: none;\r\n      background:none;\r\n      width: 100%;\r\n      height: 100%;\r\n      font-size: .16rem;\r\n      &::placeholder{\r\n        font-size: .16rem;\r\n        color:$content-notice-fontcolor;\r\n        letter-spacing: 0;\r\n        line-height: .48rem;\r\n      }\r\n    }\r\n  }\r\n  &__login-button {\r\n    margin: .32rem .4rem .16rem .4rem;\r\n    line-height: .48rem;\r\n    background: $btn-bgcolor;\r\n    box-shadow: 0 .04rem .08rem 0 rgba(0,145,255,0.32);\r\n    border-radius: .04rem;\r\n    border-radius: .04rem;\r\n    color: $bg-color;\r\n    font-size: .16rem;\r\n    text-align: center;\r\n  }\r\n  &__login-link {\r\n    text-align: center;\r\n    font-size: .14rem;\r\n    color: $content-notice-fontcolor;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./Login.vue?vue&type=template&id=79b62086&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=79b62086&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-79b62086\"\n\nexport default script"],"sourceRoot":""}